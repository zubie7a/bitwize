<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sketch 21 - Bitwise Drawing</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            display: flex;
            min-height: 100vh;
            background-color: #1a1a1a;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            overflow: hidden;
        }
        
        #sidebar {
            width: 500px;
            background-color: #2d2d2d;
            color: #e0e0e0;
            padding: 20px;
            overflow-y: auto;
            border-right: 1px solid #404040;
            transition: transform 0.3s ease, width 0.3s ease;
        }
        
        #sidebar.hidden {
            transform: translateX(-100%);
            width: 0;
            padding: 0;
            border: none;
            overflow: visible;
        }
        
        #sidebar.hidden > div {
            display: none !important;
        }
        
        #sidebar.hidden > *:not(#toggle-sidebar) {
            display: none;
        }
        
        #toggle-sidebar,
        #toggle-sidebar-closed {
            background-color: #3d3d3d;
            color: #e0e0e0;
            border: 1px solid #555;
            border-radius: 4px;
            padding: 6px 10px;
            cursor: pointer;
            font-size: 18px;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            transition: all 0.2s;
            margin-left: 10px;
            line-height: 1;
        }
        
        #toggle-sidebar:hover,
        #toggle-sidebar-closed:hover {
            background-color: #454545;
            border-color: #666;
        }
        
        #toggle-sidebar-closed {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 10000;
            margin-left: 0;
            display: none;
            visibility: hidden;
        }
        
        #sidebar.hidden ~ #toggle-sidebar-closed {
            display: block !important;
            visibility: visible !important;
        }
        
        #sidebar:not(.hidden) ~ #toggle-sidebar-closed {
            display: none !important;
            visibility: hidden !important;
        }
        
        #sidebar.hidden #toggle-sidebar {
            display: none;
        }
        
        #sidebar.hidden div:first-child {
            display: none !important;
        }
        
        h3 {
            margin: 0 0 15px 0;
            font-size: 16px;
            color: #ffffff;
            font-weight: 600;
        }
        
        #canvas-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            min-width: 0;
        }
        
        #canvas-container canvas {
            display: block;
            image-rendering: -moz-crisp-edges;
            image-rendering: -webkit-crisp-edges;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            max-width: calc(100vw - 500px);
            max-height: 100vh;
        }
        
        #sidebar.hidden ~ #canvas-container canvas {
            max-width: 100vw;
        }
        
        .code-snippet {
            background-color: #1e1e1e;
            border: 1px solid #404040;
            border-radius: 4px;
            padding: 12px;
            margin: 15px 0;
            font-size: 12px;
            line-height: 1.6;
            color: #d4d4d4;
            white-space: pre;
            overflow-x: auto;
        }
        
        .control-group {
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .control-label {
            display: inline-block;
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
            min-width: 20px;
        }
        
        .control-input {
            flex: 1;
            padding: 5px;
            background-color: #3d3d3d;
            color: #e0e0e0;
            border: 1px solid #555;
            border-radius: 4px;
            font-size: 13px;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            transition: all 0.2s;
        }
        
        .control-input:hover {
            background-color: #454545;
            border-color: #666;
        }
        
        .control-input:focus {
            outline: none;
            border-color: #007acc;
            background-color: #454545;
        }
        
        select {
            width: 80px;
            padding: 8px;
            background-color: #3d3d3d;
            color: #e0e0e0;
            border: 1px solid #555;
            border-radius: 4px;
            font-size: 13px;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        select:hover {
            background-color: #454545;
            border-color: #666;
        }
        
        select:focus {
            outline: none;
            border-color: #007acc;
            background-color: #454545;
        }
        
        #evaluate-button {
            width: 100%;
            padding: 12px;
            background-color: #007acc;
            color: #ffffff;
            border: 1px solid #005a9e;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            transition: all 0.2s;
        }
        
        #evaluate-button:hover {
            background-color: #0086d9;
            border-color: #006bb3;
        }
        
        #evaluate-button:active {
            background-color: #006bb3;
        }
        
        h3 {
            margin: 0 0 15px 0;
            font-size: 16px;
            color: #ffffff;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <button id="toggle-sidebar-closed">☰</button>
    <div id="sidebar">
        <div style="display: flex; align-items: center; margin-bottom: 15px;">
            <h3 style="margin: 0; display: inline-block;">BitwiZe</h3>
            <button id="toggle-sidebar">×</button>
        </div>
        
        <div style="margin-bottom: 15px;">
            <select id="preset-select" style="width: 100%; padding: 10px; background-color: #3d3d3d; color: #e0e0e0; border: 1px solid #555; border-radius: 4px; font-size: 13px; font-family: 'Monaco', 'Menlo', 'Courier New', monospace; cursor: pointer;">
                <option value="custom">Custom</option>
                <option value="sketch_01">Sketch_01</option>
                <option value="sketch_02">Sketch_02</option>
                <option value="sketch_03">Sketch_03</option>
                <option value="sketch_04">Sketch_04</option>
                <option value="sketch_05">Sketch_05</option>
                <option value="sketch_06">Sketch_06</option>
                <option value="sketch_07">Sketch_07</option>
                <option value="sketch_08">Sketch_08</option>
                <option value="sketch_09">Sketch_09</option>
                <option value="sketch_10">Sketch_10</option>
                <option value="sketch_11">Sketch_11</option>
                <option value="sketch_12">Sketch_12</option>
                <option value="sketch_13">Sketch_13</option>
                <option value="sketch_14">Sketch_14</option>
                <option value="sketch_15">Sketch_15</option>
                <option value="sketch_16">Sketch_16</option>
                <option value="sketch_17">Sketch_17</option>
                <option value="sketch_18">Sketch_18</option>
                <option value="sketch_19">Sketch_19</option>
                <option value="sketch_20">Sketch_20</option>
            </select>
        </div>
        
        <div style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
            <input type="checkbox" id="use-time-toggle" style="cursor: pointer; width: 18px; height: 18px;">
            <label for="use-time-toggle" style="color: #e0e0e0; font-size: 13px; cursor: pointer;">use time variable (t)</label>
            <span id="time-display" style="color: #888; font-size: 12px; margin-left: auto; display: none;">t = <span id="time-value">0</span></span>
        </div>
        
        <div class="code-snippet">for (i in range(0, 256)) {
    for (j in range(0, 256)) {</div>
        
        <div class="control-group">
            <label class="control-label" for="x-input"><strong>x</strong></label>
            <input type="text" id="x-input" class="control-input" />
        </div>

        <div class="control-group">
            <label class="control-label" for="r-input"><strong>r</strong></label>
            <input type="text" id="r-input" class="control-input" />
            <select id="r-select">
                <option value="% 255">% 255</option>
                <option value="[0,255]">[0,255]</option>
            </select>
        </div>
        
        <div class="control-group">
            <label class="control-label" for="g-input"><strong>g</strong></label>
            <input type="text" id="g-input" class="control-input" />
            <select id="g-select">
                <option value="% 255">% 255</option>
                <option value="[0,255]">[0,255]</option>
            </select>
        </div>
        
        <div class="control-group">
            <label class="control-label" for="b-input"><strong>b</strong></label>
            <input type="text" id="b-input" class="control-input" />
            <select id="b-select">
                <option value="% 255">% 255</option>
                <option value="[0,255]">[0,255]</option>
            </select>
        </div>        
        <div class="code-snippet">    }
}</div>
    <div style="margin: 20px 0;">
        <button id="evaluate-button" style="width: 100%; padding: 12px; background-color: #007acc; color: #ffffff; border: 1px solid #005a9e; border-radius: 4px; font-size: 14px; font-weight: 600; cursor: pointer; font-family: 'Monaco', 'Menlo', 'Courier New', monospace; transition: all 0.2s;">
            Evaluate
        </button>
    </div>
    </div>
    
    <div id="canvas-container"></div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.js"></script>
    <script src="sketch.js"></script>
    <script>
        const toggleButton = document.getElementById('toggle-sidebar');
        const toggleButtonClosed = document.getElementById('toggle-sidebar-closed');
        const sidebar = document.getElementById('sidebar');
        
        function toggleSidebar() {
            sidebar.classList.toggle('hidden');
            const isHidden = sidebar.classList.contains('hidden');
            // Show/hide buttons based on sidebar state
            if (isHidden) {
                toggleButtonClosed.style.display = 'block';
                toggleButtonClosed.style.visibility = 'visible';
            } else {
                toggleButtonClosed.style.display = 'none';
                toggleButtonClosed.style.visibility = 'hidden';
            }
            updateCanvasSize();
        }
        
        toggleButton.addEventListener('click', toggleSidebar);
        toggleButtonClosed.addEventListener('click', toggleSidebar);
        
        function updateCanvasSize() {
            const canvasElement = document.querySelector('canvas');
            if (canvasElement) {
                const isHidden = sidebar.classList.contains('hidden');
                const availableWidth = isHidden ? window.innerWidth : window.innerWidth - 500;
                const size = Math.min(availableWidth, window.innerHeight);
                canvasElement.style.width = size + 'px';
                canvasElement.style.height = size + 'px';
            }
        }
        
        // Update canvas size on window resize
        window.addEventListener('resize', updateCanvasSize);
    </script>
</body>
</html>
